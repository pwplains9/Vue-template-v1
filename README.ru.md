# Vue 3 Шаблон

Современный шаблон Vue 3, построенный с использованием Vite, включающий комплексный набор инструментов и лучших практик для эффективной разработки на Vue.

## Особенности

- **Vue 3** с Composition API и синтаксисом `<script setup>`
- **Vite** для молниеносной разработки и оптимизированных сборок
- **Pinia** для управления состоянием
- **Vue Router** для навигации
- **SCSS** с глобальными переменными и миксинами
- **ESLint и StyleLint** для обеспечения качества кода
- **Prettier** для единообразного форматирования кода
- **Система SVG-иконок** для оптимизированного использования иконок
- **Инструменты адаптивного дизайна** с определением области просмотра
- **Глобальная система всплывающих окон** для управления модальными и всплывающими окнами
- **Инструменты мониторинга производительности** для разработки
- **SEO-оптимизация** с управлением мета-тегами

## Начало работы

### Предварительные требования

- Node.js (v14+)
- npm или yarn

### Установка

```bash
# Клонирование репозитория
git clone <url-репозитория>

# Переход в директорию проекта
cd Vue-template-v1

# Установка зависимостей
npm install
# или
yarn install
```

### Разработка

```bash
# Запуск сервера разработки
npm run start
# или
yarn start
```

Это запустит сервер разработки по адресу `http://localhost:3000`.

### Сборка для продакшена

```bash
# Сборка для продакшена
npm run build
# или
yarn build
```

Собранные файлы будут находиться в директории `dist`.

### Предварительный просмотр продакшен-сборки

```bash
# Предварительный просмотр продакшен-сборки
npm run preview
# или
yarn preview
```

## Доступные команды

Этот шаблон включает несколько npm-скриптов для помощи с разработкой, сборкой и обеспечением качества кода:

### Команды разработки

```bash
# Запуск сервера разработки
npm run start
# или
yarn start
```

Это запускает сервер разработки Vite с горячей заменой модулей.

### Команды сборки

```bash
# Сборка для продакшена
npm run build
# или
yarn build
```

Это собирает приложение для продакшена с оптимизацией производительности.

```bash
# Предварительный просмотр продакшен-сборки
npm run preview
# или
yarn preview
```

Это локально обслуживает продакшен-сборку для предварительного просмотра.

### Команды линтинга и форматирования

```bash
# Запуск ESLint для JavaScript и Vue файлов
npm run lint:js
# или
yarn lint:js
```

Это проверяет и исправляет JavaScript и Vue файлы в соответствии с конфигурацией ESLint.

```bash
# Запуск StyleLint для CSS и SCSS файлов
npm run lint:styles
# или
yarn lint:styles
```

Это проверяет и исправляет CSS и SCSS файлы в соответствии с конфигурацией StyleLint.

```bash
# Запуск Prettier для всех поддерживаемых файлов
npm run lint:prettier
# или
yarn lint:prettier
```

Это форматирует JavaScript, SCSS и Vue файлы с помощью Prettier.

```bash
# Запуск всех линтеров и форматтеров
npm run lint
# или
yarn lint
```

Это запускает скрипт `lint.js`, который последовательно выполняет все инструменты линтинга и форматирования.

# Скрипт генерации

Этот скрипт помогает быстро создавать компоненты и страницы с правильной структурой.

## Использование

### Генерация компонента

```bash
npm run generate:component МойКомпонент
```

Это создаст:
- `src/components/МойКомпонент/`
- `src/components/МойКомпонент/МойКомпонент.vue`
- `src/components/МойКомпонент/index.scss`

### Генерация страницы

```bash
npm run generate:page ИмяСтраницы
```

Это создаст:
- `src/pages/ИмяСтраницы/`
- `src/pages/ИмяСтраницы/ИмяСтраницы.vue`
- `src/pages/ИмяСтраницы/index.scss`

### Общая команда генерации

```bash
npm run generate <тип> <имя>
```

Где:
- `<тип>` - это "component" или "page"
- `<имя>` - это имя вашего компонента или страницы

## Структура проекта

```
src/
├── assets/          # Статические ресурсы, такие как изображения и иконки
├── components/      # Повторно используемые Vue компоненты
│   ├── UI/          # UI компоненты (кнопки, всплывающие окна, SvgIcon и т. д.)
│   └── Header/      # Компоненты заголовка
├── composables/     # Повторно используемые функции композиции
│   └── usePopup.js  # Composable для управления всплывающими окнами
├── icons/           # SVG иконки
├── layouts/         # Компоненты макетов
├── pages/           # Компоненты страниц
│   ├── Home/        # Домашняя страница
│   └── Article/     # Страница статьи
├── services/        # API-сервисы и внешние интеграции
├── stores/          # Хранилища Pinia для управления состоянием
├── styles/          # Глобальные стили, переменные и миксины
├── utils/           # Служебные функции
│   ├── helpers.js           # Общие вспомогательные функции
│   ├── lazyLoader.js        # Утилиты ленивой загрузки
│   ├── performanceMonitor.js # Инструменты мониторинга производительности
│   ├── vhFix.js             # Исправление высоты области просмотра для мобильных устройств
│   └── viewportWatcher.js   # Утилиты адаптивного дизайна
├── App.vue          # Корневой компонент
├── main.js          # Точка входа в приложение
└── TransitionView.vue # Компонент переходов между страницами
```

## Использование компонентов

### SVG-иконки

Шаблон включает систему SVG-иконок с использованием `vite-plugin-svg-icons`:

```vue
<template>
  <SvgIcon name="имя-иконки" />
</template>

<script setup>
import SvgIcon from '@/components/UI/SvgIcon.vue';
</script>
```

Поместите ваши SVG-иконки в директорию `src/icons`.

#### Подробное использование SVG-иконок

Компонент `SvgIcon` предоставляет простой способ использования SVG-иконок во всем приложении.

##### Свойства компонента

| Свойство | Тип    | По умолчанию | Обязательное | Описание                                   |
|----------|--------|--------------|--------------|-------------------------------------------|
| name     | String | -            | Да           | Имя иконки (без префикса)                  |
| prefix   | String | 'icon'       | Нет          | Префикс, используемый в ID иконки          |
| color    | String | '#333'       | Нет          | Цвет заливки иконки                        |

##### Добавление новых иконок

1. Поместите ваши SVG-файлы в директорию `src/icons`
2. Имя файла будет использовано как имя иконки (например, `menu.svg` будет использоваться как `<SvgIcon name="menu" />`)
3. Иконки автоматически регистрируются во время сборки

##### Примеры

Базовое использование:
```vue
<SvgIcon name="menu" />
```

С пользовательским цветом:
```vue
<SvgIcon name="arrow-down" color="#FF5500" />
```

С пользовательским префиксом:
```vue
<SvgIcon name="close" prefix="my-icon" />
```

##### Стилизация SVG-иконок

Вы можете стилизовать SVG-иконку с помощью CSS:

```vue
<template>
  <SvgIcon name="menu" class="my-icon" />
</template>

<style scoped>
.my-icon {
  width: 24px;
  height: 24px;
  transition: transform 0.3s ease;
}

.my-icon:hover {
  transform: scale(1.2);
}
</style>
```

### Глобальная система всплывающих окон

Шаблон включает мощную систему управления всплывающими окнами:

```vue
<template>
  <!-- Определение всплывающего окна -->
  <BasePopup id="my-popup" title="Моё всплывающее окно">
    <p>Это содержимое моего всплывающего окна</p>
    
    <template #footer>
      <button @click="closePopup">Закрыть</button>
    </template>
  </BasePopup>
  
  <!-- Кнопка для открытия всплывающего окна -->
  <button @click="openPopup">Открыть всплывающее окно</button>
</template>

<script setup>
import BasePopup from '@/components/UI/Popup.vue';
import { usePopup } from '@/composables/usePopup';

const myPopup = usePopup('my-popup');

const openPopup = () => {
  myPopup.open({
    // Опциональные свойства для передачи во всплывающее окно
    someData: 'Привет, мир'
  });
};

const closePopup = () => {
  myPopup.close();
};
</script>
```

Для управления несколькими всплывающими окнами вы можете использовать `usePopupManager`:

```js
import { usePopupManager } from '@/composables/usePopup';

const popupManager = usePopupManager();

// Закрыть все открытые всплывающие окна
popupManager.closeAll();

// Проверить, открыто ли какое-либо всплывающее окно
const hasOpenPopups = popupManager.isAnyOpen;
```

### Адаптивный дизайн

Шаблон включает утилиты определения области просмотра:

```vue
<script setup>
import { useViewport } from '@/utils/viewportWatcher';

// Время задержки по умолчанию - 250 мс
const { width, height, isMobile, isTablet, isDesktop } = useViewport();

// Или с пользовательскими опциями
const viewport = useViewport({
  debounceTime: 200
});
</script>

<template>
  <div>
    <div v-if="isMobile">Мобильный контент</div>
    <div v-else-if="isTablet">Планшетный контент</div>
    <div v-else>Десктопный контент</div>
  </div>
</template>
```

Watcher области просмотра использует следующие точки перелома:
- Мобильные устройства: < 768px
- Планшеты: 768px - 1024px
- Десктоп: > 1024px


# UI-компоненты

## ResponsiveImage

Компонент `ResponsiveImage` предоставляет простой способ отображения адаптивных изображений с правильной поддержкой srcset для различных размеров экрана и плотностей пикселей.

### Особенности:
- Автоматическая обработка вариантов изображений для десктопа (1024px) и мобильных устройств
- Поддержка плотности пикселей 2x (дисплеи Retina)
- Ленивая загрузка по умолчанию
- Настраиваемая ширина и высота
- Дружественный к доступности с обязательным alt-текстом

### Соглашение по именованию изображений

Для правильной работы этого компонента ваши изображения должны следовать этому соглашению по именованию:

- Базовое изображение: `image.jpg`
- Десктопное изображение: `image-1024.jpg`
- Десктопное изображение Retina: `image-1024@2x.jpg`
- Мобильное изображение: `image-mobile.jpg`
- Мобильное изображение Retina: `image-mobile@2x.jpg`

### Пример использования

```vue
<template>
  <div>
    <h1>Отображение продукта</h1>
    
    <!-- Базовое использование с обязательными свойствами -->
    <ResponsiveImage 
      src="/images/product.jpg"
      alt="Описание продукта"
    />
    
    <!-- Расширенное использование со всеми свойствами -->
    <ResponsiveImage 
      src="/images/product.jpg"
      alt="Описание продукта"
      :width="600"
      :height="400"
      :lazy="true"
      imgClass="product-image rounded"
    />
  </div>
</template>

<script setup>
import ResponsiveImage from '@/components/UI/ResponsiveImage.vue';
</script>
```

### Свойства

| Свойство  | Тип              | По умолчанию | Обязательное | Описание                                          |
|-----------|------------------|--------------|--------------|---------------------------------------------------|
| src       | String           | -            | Да           | Базовый URL-источник изображения                   |
| alt       | String           | -            | Да           | Альтернативный текст для доступности               |
| width     | Number или String | 'auto'       | Нет          | Ширина изображения (число для px, строка для значения CSS) |
| height    | Number или String | 'auto'       | Нет          | Высота изображения (число для px, строка для значения CSS) |
| lazy      | Boolean          | true         | Нет          | Использовать ли ленивую загрузку                   |
| imgClass  | String           | ''           | Нет          | Опциональный CSS-класс для применения к элементу img |

## Мониторинг производительности

Шаблон включает инструменты мониторинга производительности в режиме разработки:

```vue
<template>
  <!-- Добавление мониторинга производительности к компонентам -->
  <div v-perf="'my-component'">
    <!-- Содержимое компонента -->
  </div>
</template>
```

Монитор производительности предоставляет:
- Отслеживание загрузки ресурсов
- Мониторинг использования памяти
- Метрики производительности навигации
- Отслеживание времени рендеринга компонентов

Эти инструменты автоматически включены в режиме разработки и доступны в консоли браузера.

## SEO-оптимизация

Шаблон включает SEO-оптимизацию с управлением мета-тегами:

```js
// В конфигурации маршрутов
{
  path: '/article/',
  name: 'Article',
  component: Article,
  meta: {
    title: 'Заголовок статьи',
    description: 'Описание статьи',
    keyWords: 'статья, ключевые слова'
  }
}
```

Роутер автоматически обновляет заголовок документа и мета-теги на основе мета-информации маршрута.

## Линтинг и форматирование

Этот проект включает инструменты линтинга и форматирования:

### ESLint для JavaScript и Vue
- Настроен для Vue 3 с рекомендуемыми правилами
- Запустите `npm run lint:js` для проверки и исправления JavaScript и Vue файлов

### StyleLint для CSS/SCSS
- Настроен для SCSS со стандартными правилами
- Запустите `npm run lint:styles` для проверки и исправления проблем со стилями

### Prettier
- Запустите `npm run lint:prettier` для форматирования всех файлов

### Команды быстрого исправления
- Запустите `npm run lint` для запуска всех линтеров и форматтеров одновременно
- Для проблем с отступами SCSS, запустите `node fix-scss-indentation.js`

### Интеграция с VS Code
- Автоисправление включено при сохранении в VS Code
- Убедитесь, что установлены рекомендуемые расширения:
  - ESLint
  - Stylelint
  - Prettier
  - Volar (Vue Language Features)

## Настройка линтинга

Если вам нужно настроить линтинг в новом проекте, запустите:

```bash
node setup-linting.js
```

Это установит все необходимые зависимости и проверит файлы конфигурации.

## Лицензия

[MIT](LICENSE)
